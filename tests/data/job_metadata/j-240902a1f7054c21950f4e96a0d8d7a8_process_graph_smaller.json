{
  "process_graph": {
    "loadcollection1": {
      "process_id": "load_collection",
      "arguments": {
        "bands": [
          "B02",
          "B03",
          "B04",
          "B08",
          "B11",
          "B12"
        ],
        "featureflags": {
          "tilesize": 128
        },
        "id": "SENTINEL2_L2A",
        "properties": {
          "eo:cloud_cover": {
            "process_graph": {
              "lte1": {
                "process_id": "lte",
                "arguments": {
                  "x": {
                    "from_parameter": "value"
                  },
                  "y": 90
                },
                "result": true
              }
            }
          }
        },
        "spatial_extent": {
          "west": 581900,
          "south": 9559080,
          "east": 592140,
          "north": 9569320,
          "crs": "EPSG:32737",
          "srs": "EPSG:32737"
        },
        "temporal_extent": [
          "2019-01-01",
          "2019-01-02"
        ]
      }
    },
    "loadcollection2": {
      "process_id": "load_collection",
      "arguments": {
        "bands": [
          "SCL"
        ],
        "id": "SENTINEL2_L2A",
        "properties": {
          "eo:cloud_cover": {
            "process_graph": {
              "lte2": {
                "process_id": "lte",
                "arguments": {
                  "x": {
                    "from_parameter": "value"
                  },
                  "y": 90
                },
                "result": true
              }
            }
          }
        },
        "spatial_extent": {
          "west": 581900,
          "south": 9559080,
          "east": 592140,
          "north": 9569320,
          "crs": "EPSG:32737",
          "srs": "EPSG:32737"
        },
        "temporal_extent": [
          "2019-01-01",
          "2019-01-02"
        ]
      }
    },
    "resamplespatial1": {
      "process_id": "resample_spatial",
      "arguments": {
        "align": "upper-left",
        "data": {
          "from_node": "loadcollection2"
        },
        "method": "near",
        "projection": null,
        "resolution": 10
      }
    },
    "toscldilationmask1": {
      "process_id": "to_scl_dilation_mask",
      "arguments": {
        "data": {
          "from_node": "resamplespatial1"
        },
        "erosion_kernel_size": 3,
        "kernel1_size": 17,
        "kernel2_size": 77,
        "mask1_values": [
          2,
          4,
          5,
          6,
          7
        ],
        "mask2_values": [
          3,
          8,
          9,
          10,
          11
        ],
        "scl_band_name": "SCL"
      }
    },
    "mask1": {
      "process_id": "mask",
      "arguments": {
        "data": {
          "from_node": "loadcollection1"
        },
        "mask": {
          "from_node": "toscldilationmask1"
        }
      }
    },
    "applydimension1": {
      "process_id": "apply_dimension",
      "arguments": {
        "data": {
          "from_node": "mask1"
        },
        "dimension": "bands",
        "process": {
          "process_graph": {
            "linearscalerange1": {
              "process_id": "linear_scale_range",
              "arguments": {
                "inputMax": 32766,
                "inputMin": -32768,
                "outputMax": 32766,
                "outputMin": -32768,
                "x": {
                  "from_parameter": "data"
                }
              }
            },
            "arrayelement1": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 3
              }
            },
            "arrayelement2": {
              "process_id": "array_element",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "index": 2
              }
            },
            "subtract1": {
              "process_id": "subtract",
              "arguments": {
                "x": {
                  "from_node": "arrayelement1"
                },
                "y": {
                  "from_node": "arrayelement2"
                }
              }
            },
            "add1": {
              "process_id": "add",
              "arguments": {
                "x": {
                  "from_node": "arrayelement1"
                },
                "y": {
                  "from_node": "arrayelement2"
                }
              }
            },
            "divide1": {
              "process_id": "divide",
              "arguments": {
                "x": {
                  "from_node": "subtract1"
                },
                "y": {
                  "from_node": "add1"
                }
              }
            },
            "linearscalerange2": {
              "process_id": "linear_scale_range",
              "arguments": {
                "inputMax": 1,
                "inputMin": -1,
                "outputMax": 10000,
                "outputMin": -10000,
                "x": {
                  "from_node": "divide1"
                }
              }
            },
            "arraymodify1": {
              "process_id": "array_modify",
              "arguments": {
                "data": {
                  "from_node": "linearscalerange1"
                },
                "index": 6,
                "values": [
                  {
                    "from_node": "linearscalerange2"
                  }
                ]
              },
              "result": true
            }
          }
        }
      }
    },
    "renamelabels1": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "applydimension1"
        },
        "dimension": "bands",
        "target": [
          "B02",
          "B03",
          "B04",
          "B08",
          "B11",
          "B12",
          "NDVI"
        ]
      }
    },
    "aggregatetemporalperiod1": {
      "process_id": "aggregate_temporal_period",
      "arguments": {
        "data": {
          "from_node": "renamelabels1"
        },
        "period": "dekad",
        "reducer": {
          "process_graph": {
            "median1": {
              "process_id": "median",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "applydimension2": {
      "process_id": "apply_dimension",
      "arguments": {
        "data": {
          "from_node": "aggregatetemporalperiod1"
        },
        "dimension": "t",
        "process": {
          "process_graph": {
            "arrayinterpolatelinear1": {
              "process_id": "array_interpolate_linear",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "applydimension3": {
      "process_id": "apply_dimension",
      "arguments": {
        "data": {
          "from_node": "applydimension2"
        },
        "dimension": "t",
        "process": {
          "process_graph": {
            "quantiles1": {
              "process_id": "quantiles",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                },
                "probabilities": [
                  0.1,
                  0.25,
                  0.5,
                  0.75,
                  0.9
                ]
              },
              "result": true
            }
          }
        },
        "target_dimension": "bands"
      }
    },
    "renamelabels2": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "applydimension3"
        },
        "dimension": "bands",
        "target": [
          "B02_P10",
          "B02_P25",
          "B02_P50",
          "B02_P75",
          "B02_P90",
          "B03_P10",
          "B03_P25",
          "B03_P50",
          "B03_P75",
          "B03_P90",
          "B04_P10",
          "B04_P25",
          "B04_P50",
          "B04_P75",
          "B04_P90",
          "B08_P10",
          "B08_P25",
          "B08_P50",
          "B08_P75",
          "B08_P90",
          "B11_P10",
          "B11_P25",
          "B11_P50",
          "B11_P75",
          "B11_P90",
          "B12_P10",
          "B12_P25",
          "B12_P50",
          "B12_P75",
          "B12_P90",
          "NDVI_P10",
          "NDVI_P25",
          "NDVI_P50",
          "NDVI_P75",
          "NDVI_P90"
        ]
      }
    },
    "apply1": {
      "process_id": "apply",
      "arguments": {
        "data": {
          "from_node": "renamelabels2"
        },
        "process": {
          "process_graph": {
            "linearscalerange3": {
              "process_id": "linear_scale_range",
              "arguments": {
                "inputMax": 32766,
                "inputMin": -32768,
                "outputMax": 32766,
                "outputMin": -32768,
                "x": {
                  "from_parameter": "x"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "loadcollection3": {
      "process_id": "load_collection",
      "arguments": {
        "bands": [
          "DEM"
        ],
        "id": "COPERNICUS_30",
        "spatial_extent": {
          "west": 581900,
          "south": 9559080,
          "east": 592140,
          "north": 9569320,
          "crs": "EPSG:32737",
          "srs": "EPSG:32737"
        },
        "temporal_extent": null
      }
    },
    "reducedimension1": {
      "process_id": "reduce_dimension",
      "arguments": {
        "data": {
          "from_node": "loadcollection3"
        },
        "dimension": "t",
        "reducer": {
          "process_graph": {
            "mean1": {
              "process_id": "mean",
              "arguments": {
                "data": {
                  "from_parameter": "data"
                }
              },
              "result": true
            }
          }
        }
      }
    },
    "mergecubes1": {
      "process_id": "merge_cubes",
      "arguments": {
        "cube1": {
          "from_node": "apply1"
        },
        "cube2": {
          "from_node": "reducedimension1"
        }
      }
    },
    "renamelabels3": {
      "process_id": "rename_labels",
      "arguments": {
        "data": {
          "from_node": "mergecubes1"
        },
        "dimension": "bands",
        "target": [
          "prediction",
          "prob_10",
          "prob_20",
          "prob_30",
          "prob_40",
          "prob_50",
          "prob_60",
          "prob_70",
          "prob_80",
          "prob_90",
          "prob_95",
          "prob_100"
        ]
      }
    },
    "saveresult1": {
      "process_id": "save_result",
      "arguments": {
        "data": {
          "from_node": "renamelabels3"
        },
        "format": "GTiff",
        "options": {}
      },
      "result": true
    }
  }
}
